<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Posts</title>
  </head>
  <body>
    <div id="page-wrapper">
      <div class="container-fluid">
        <div class="row">
          <div class="col-lg-12">
            <h1 class="page-header">Users</h1>
          </div>
          <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
        <div class="row">
          <div class="col-lg-12">
            <div class="panel panel-default">
              <div class="panel-heading">DataTables Advanced Tables</div>
              <!-- /.panel-heading -->
              <div class="panel-body">
                <div class="table-responsive">
                  <table
                    class="table table-striped table-bordered table-hover"
                    id="posts_table"
                  >
                    <thead>
                      <tr>
                        <th>Post id</th>
                        <th>Body</th>
                        <th>Date Posted</th>
                        <th>User id</th>
                        <th>Likes</th>
                        <th>Image</th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                  </table>
                </div>
                <!-- /.table-responsive -->
              </div>
              <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
          </div>
          <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container-fluid -->
    </div>
    <!-- /#page-wrapper -->
    <script type="text/javascript">
      getPosts();

      function getPosts() {
        $.ajax({
          url: "rest/posts",
          type: "GET",
          beforeSend: function (xhr) {},
          success: function (data) {
            console.log(data);
            var html = "";
            for (var i = 0; i < data.length; i++) {
              html +=
                '<tr class="odd">' +
                "<td>" +
                data[i].id +
                "</td>" +
                "<td>" +
                data[i].body +
                "</td>" +
                "<td>" +
                data[i].posted_at +
                "</td>" +
                "<td>" +
                data[i].user_id +
                "</td>";
              "<td>" + data[i].likes + "</td>";
              "<td>" + data[i].postimg + "</td>";
            }

            $("#posts_table tbody").html(html);
          },
        });
      }
    </script>
  </body>
</html>
